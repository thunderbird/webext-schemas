[
    {
        "namespace": "manifest",
        "types": [
            {
                "$extend": "OptionalPermission",
                "choices": [
                    {
                        "enum": [
                            "accountsRead"
                        ],
                        "type": "string"
                    }
                ]
            }
        ]
    },
    {
        "events": [
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest/accounts.html#oncreated-accountid-account",
                "description": "Fired when a new account has been created.",
                "name": "onCreated",
                "parameters": [
                    {
                        "$ref": "MailAccountId",
                        "name": "accountId"
                    },
                    {
                        "$ref": "MailAccount",
                        "name": "account"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest/accounts.html#ondeleted-accountid",
                "description": "Fired when an account has been removed.",
                "name": "onDeleted",
                "parameters": [
                    {
                        "$ref": "MailAccountId",
                        "name": "accountId"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest/accounts.html#onupdated-accountid-changedvalues",
                "description": "Fired when a property of an account has been modified. Folders and identities of accounts are not monitored by this event, use the dedicated folder and identity events instead. A changed <val>defaultIdentity</val> is reported only after a different identity has been assigned as default identity, but not after a property of the default identity has been changed.",
                "name": "onUpdated",
                "parameters": [
                    {
                        "$ref": "MailAccountId",
                        "name": "accountId"
                    },
                    {
                        "name": "changedValues",
                        "properties": {
                            "defaultIdentity": {
                                "$ref": "identities.MailIdentity",
                                "description": "The default identity of this account."
                            },
                            "name": {
                                "description": "The human-friendly name of this account.",
                                "type": "string"
                            }
                        },
                        "type": "object"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            }
        ],
        "functions": [
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest/accounts.html#list-includefolders",
                "async": "callback",
                "description": "Returns all mail accounts. They will be returned in the same order as used in Thunderbird's folder pane.",
                "name": "list",
                "parameters": [
                    {
                        "default": true,
                        "description": "Specifies whether the returned $(ref:accounts.MailAccount) objects should included their account's folders. Defaults to <value>true</value>.",
                        "name": "includeFolders",
                        "optional": true,
                        "type": "boolean"
                    },
                    {
                        "name": "callback",
                        "optional": true,
                        "parameters": [
                            {
                                "items": {
                                    "$ref": "accounts.MailAccount"
                                },
                                "type": "array"
                            }
                        ],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest/accounts.html#get-accountid-includefolders",
                "async": "callback",
                "description": "Returns details of the requested account, or <value>null</value> if it doesn't exist.",
                "name": "get",
                "parameters": [
                    {
                        "$ref": "MailAccountId",
                        "name": "accountId"
                    },
                    {
                        "default": true,
                        "description": "Specifies whether the returned $(ref:accounts.MailAccount) object should included the account's folders. Defaults to <value>true</value>.",
                        "name": "includeFolders",
                        "optional": true,
                        "type": "boolean"
                    },
                    {
                        "name": "callback",
                        "optional": true,
                        "parameters": [
                            {
                                "choices": [
                                    {
                                        "$ref": "accounts.MailAccount"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            }
                        ],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest/accounts.html#getdefault-includefolders",
                "async": "callback",
                "description": "Returns the default account, or <value>null</value> if it is not defined.",
                "name": "getDefault",
                "parameters": [
                    {
                        "default": true,
                        "description": "Specifies whether the returned $(ref:accounts.MailAccount) object should included the account's folders. Defaults to <value>true</value>.",
                        "name": "includeFolders",
                        "optional": true,
                        "type": "boolean"
                    },
                    {
                        "name": "callback",
                        "optional": true,
                        "parameters": [
                            {
                                "choices": [
                                    {
                                        "$ref": "accounts.MailAccount"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            }
                        ],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest/accounts.html#setdefaultidentity-accountid-identityid",
                "async": true,
                "deprecated": "Deprecated since Thunderbird 91 and removed in Manifest V3: accounts.setDefaultIdentity() is now available as identities.setDefault.",
                "description": "Sets the default identity for an account.",
                "name": "setDefaultIdentity",
                "parameters": [
                    {
                        "$ref": "MailAccountId",
                        "name": "accountId"
                    },
                    {
                        "name": "identityId",
                        "type": "string"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest/accounts.html#getdefaultidentity-accountid",
                "async": "callback",
                "deprecated": "Deprecated since Thunderbird 91 and removed in Manifest V3: accounts.getDefaultIdentity() is now available as identities.getDefault.",
                "description": "Returns the default identity for an account, or <value>null</value> if it is not defined.",
                "name": "getDefaultIdentity",
                "parameters": [
                    {
                        "$ref": "MailAccountId",
                        "name": "accountId"
                    },
                    {
                        "name": "callback",
                        "optional": true,
                        "parameters": [
                            {
                                "choices": [
                                    {
                                        "$ref": "identities.MailIdentity"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            }
                        ],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            }
        ],
        "namespace": "accounts",
        "permissions": [
            "accountsRead"
        ],
        "types": [
            {
                "description": "An object describing a mail account, as returned for example by the $(ref:accounts.list) and $(ref:accounts.get) methods.",
                "id": "MailAccount",
                "properties": {
                    "folders": {
                        "choices": [
                            {
                                "items": {
                                    "$ref": "folders.MailFolder"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "description": "The folders for this account. The property may be <value>null</value>, if inclusion of folders had not been requested."
                    },
                    "id": {
                        "$ref": "MailAccountId",
                        "description": "A unique identifier for this account."
                    },
                    "identities": {
                        "description": "The identities associated with this account. The default identity is listed first, others in no particular order.",
                        "items": {
                            "$ref": "identities.MailIdentity"
                        },
                        "type": "array"
                    },
                    "name": {
                        "description": "The human-friendly name of this account.",
                        "type": "string"
                    },
                    "rootFolder": {
                        "$ref": "folders.MailFolder",
                        "description": "The root folder associated with this account."
                    },
                    "type": {
                        "description": "What sort of account this is, e.g. <value>imap</value>, <value>nntp</value>, or <value>pop3</value>.",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            {
                "description": "A unique id representing a $(ref:accounts.MailAccount).",
                "id": "MailAccountId",
                "type": "string"
            },
            {
                "description": "The type of an account.",
                "enum": [
                    "imap",
                    "nntp",
                    "none",
                    "pop3"
                ],
                "id": "MailAccountType",
                "type": "string"
            }
        ]
    }
]