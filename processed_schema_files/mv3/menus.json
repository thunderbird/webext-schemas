[
    {
        "namespace": "manifest",
        "types": [
            {
                "$extend": "PermissionNoPrompt",
                "choices": [
                    {
                        "enum": [
                            "menus"
                        ],
                        "type": "string"
                    }
                ]
            },
            {
                "$extend": "OptionalPermissionNoPrompt",
                "choices": [
                    {
                        "enum": [
                            "menus.overrideContext"
                        ],
                        "type": "string"
                    }
                ]
            }
        ]
    },
    {
        "description": "The menus API allows to add items to Thunderbird's menus. You can choose what types of objects your context menu additions apply to, such as images, hyperlinks, and pages.",
        "events": [
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#onclicked-info-tab",
                "description": "Fired when a context menu item is clicked. This is a user input event handler. For asynchronous listeners some <a href='https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/User_actions'>restrictions</a> apply.",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/onClicked",
                "name": "onClicked",
                "parameters": [
                    {
                        "$ref": "OnClickData",
                        "description": "Information about the item clicked and the context where the click happened.",
                        "name": "info",
                        "support": {
                            "version_added": true
                        }
                    },
                    {
                        "$ref": "tabs.Tab",
                        "description": "The details of the tab where the click took place. If the click did not take place in a tab, this parameter will be missing.",
                        "name": "tab",
                        "optional": true,
                        "support": {
                            "version_added": true
                        }
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#onshown-info-tab",
                "description": "Fired when a menu is shown. The extension can add, modify or remove menu items and call $(ref:menus.refresh) to update the menu.",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/onShown",
                "name": "onShown",
                "parameters": [
                    {
                        "$ref": "OnShowData",
                        "description": "Information about the context of the menu action and the created menu items.",
                        "name": "info",
                        "support": {
                            "version_added": true
                        }
                    },
                    {
                        "$ref": "tabs.Tab",
                        "description": "The details of the tab where the menu was opened.",
                        "name": "tab",
                        "support": {
                            "version_added": true
                        }
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#onhidden",
                "description": "Fired when a menu is hidden. This event is only fired if onShown has fired before.",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/onHidden",
                "name": "onHidden",
                "parameters": [],
                "support": {
                    "version_added": true
                },
                "type": "function"
            }
        ],
        "functions": [
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#create-createproperties",
                "description": "Creates a new context menu item. Note that if an error occurs during creation, you may not find out until the creation callback fires (the details will be in <a href='https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/lastError'>runtime.lastError</a>).",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/create",
                "name": "create",
                "parameters": [
                    {
                        "name": "createProperties",
                        "properties": {
                            "checked": {
                                "description": "The initial state of a checkbox or radio item: <var>true</var> for selected and <var>false</var> for unselected. Only one radio item can be selected at a time in a given group of radio items.",
                                "optional": true,
                                "type": "boolean"
                            },
                            "command": {
                                "choices": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "$ref": "menus.MenuActionCommand"
                                    }
                                ],
                                "description": "Specifies a command to issue for the context click. Can either be a user defined command, or one of the predefined action commands.",
                                "optional": true
                            },
                            "contexts": {
                                "description": "List of contexts this menu item will appear in. Defaults to <var>['page']</var> if not specified.",
                                "items": {
                                    "$ref": "ContextType"
                                },
                                "minItems": 1,
                                "optional": true,
                                "type": "array"
                            },
                            "documentUrlPatterns": {
                                "description": "Lets you restrict the item to apply only to documents whose URL matches one of the given patterns. (This applies to frames as well.) For details on the format of a pattern, see <a href='https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns'>Match Patterns</a>.",
                                "items": {
                                    "type": "string"
                                },
                                "optional": true,
                                "type": "array"
                            },
                            "enabled": {
                                "description": "Whether this context menu item is enabled or disabled. Defaults to true.",
                                "optional": true,
                                "type": "boolean"
                            },
                            "icons": {
                                "choices": [
                                    {
                                        "$ref": "MenuIconPath"
                                    },
                                    {
                                        "$ref": "MenuIconDictionary"
                                    }
                                ],
                                "description": "Custom icons to display next to the menu item. Custom icons can only be set for items appearing in submenus.",
                                "optional": true
                            },
                            "id": {
                                "description": "The unique ID to assign to this item. Mandatory for event pages. Cannot be the same as another ID for this extension.",
                                "optional": true,
                                "type": "string"
                            },
                            "onclick": {
                                "description": "A function that will be called back when the menu item is clicked. Event pages cannot use this.",
                                "optional": true,
                                "parameters": [
                                    {
                                        "$ref": "OnClickData",
                                        "description": "Information about the item clicked and the context where the click happened.",
                                        "name": "info"
                                    },
                                    {
                                        "$ref": "tabs.Tab",
                                        "description": "The details of the tab where the click took place.",
                                        "name": "tab"
                                    }
                                ],
                                "type": "function"
                            },
                            "parentId": {
                                "choices": [
                                    {
                                        "type": "integer"
                                    },
                                    {
                                        "type": "string"
                                    }
                                ],
                                "description": "The ID of a parent menu item; this makes the item a child of a previously added item.",
                                "optional": true
                            },
                            "targetUrlPatterns": {
                                "description": "Similar to documentUrlPatterns, but lets you filter based on the src attribute of img/audio/video tags and the href of anchor tags.",
                                "items": {
                                    "type": "string"
                                },
                                "optional": true,
                                "type": "array"
                            },
                            "title": {
                                "description": "The text to be displayed in the item; this is <em>required</em> unless <var>type</var> is <var>separator</var>. When the context is <var>selection</var>, you can use <var>%s</var> within the string to show the selected text. For example, if this parameter's value is <var>Translate '%s' to Latin</var> and the user selects the word <var>cool</var>, the context menu item for the selection is <var>Translate 'cool' to Latin</var>. To specify an access key for the new menu entry, include a <var>&</var> before the desired letter in the title. For example <var>&Help</var>.",
                                "optional": true,
                                "type": "string"
                            },
                            "type": {
                                "$ref": "ItemType",
                                "description": "The type of menu item. Defaults to <var>normal</var> if not specified.",
                                "optional": true
                            },
                            "viewTypes": {
                                "description": "List of view types where the menu item will be shown. Defaults to any view, including those without a viewType.",
                                "items": {
                                    "$ref": "extension.ViewType"
                                },
                                "minItems": 1,
                                "optional": true,
                                "type": "array"
                            },
                            "visible": {
                                "description": "Whether the item is visible in the menu.",
                                "optional": true,
                                "type": "boolean"
                            }
                        },
                        "support": {
                            "version_added": true
                        },
                        "type": "object"
                    },
                    {
                        "description": "Called when the item has been created in the browser. If there were any problems creating the item, details will be available in <a href='https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/lastError'>runtime.lastError</a>.",
                        "name": "callback",
                        "optional": true,
                        "parameters": [],
                        "type": "function"
                    }
                ],
                "returns": {
                    "choices": [
                        {
                            "type": "integer"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "The ID of the newly created item."
                },
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#update-id-updateproperties",
                "async": "callback",
                "description": "Updates a previously created context menu item.",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/update",
                "name": "update",
                "parameters": [
                    {
                        "choices": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "string"
                            }
                        ],
                        "description": "The ID of the item to update.",
                        "name": "id",
                        "support": {
                            "version_added": true
                        }
                    },
                    {
                        "description": "The properties to update. Accepts the same values as the create function.",
                        "name": "updateProperties",
                        "properties": {
                            "checked": {
                                "optional": true,
                                "type": "boolean"
                            },
                            "contexts": {
                                "items": {
                                    "$ref": "ContextType"
                                },
                                "minItems": 1,
                                "optional": true,
                                "type": "array"
                            },
                            "documentUrlPatterns": {
                                "items": {
                                    "type": "string"
                                },
                                "optional": true,
                                "type": "array"
                            },
                            "enabled": {
                                "optional": true,
                                "type": "boolean"
                            },
                            "icons": {
                                "choices": [
                                    {
                                        "$ref": "MenuIconPath"
                                    },
                                    {
                                        "$ref": "MenuIconDictionary"
                                    }
                                ],
                                "optional": "omit-key-if-missing"
                            },
                            "onclick": {
                                "optional": "omit-key-if-missing",
                                "parameters": [
                                    {
                                        "$ref": "OnClickData",
                                        "name": "info"
                                    },
                                    {
                                        "$ref": "tabs.Tab",
                                        "description": "The details of the tab where the click took place. **Note:** this parameter only present for extensions.",
                                        "name": "tab"
                                    }
                                ],
                                "type": "function"
                            },
                            "parentId": {
                                "choices": [
                                    {
                                        "type": "integer"
                                    },
                                    {
                                        "type": "string"
                                    }
                                ],
                                "description": "**Note:** You cannot change an item to be a child of one of its own descendants.",
                                "optional": true
                            },
                            "targetUrlPatterns": {
                                "items": {
                                    "type": "string"
                                },
                                "optional": true,
                                "type": "array"
                            },
                            "title": {
                                "optional": true,
                                "type": "string"
                            },
                            "type": {
                                "$ref": "ItemType",
                                "optional": true
                            },
                            "viewTypes": {
                                "items": {
                                    "$ref": "extension.ViewType"
                                },
                                "minItems": 1,
                                "optional": true,
                                "type": "array"
                            },
                            "visible": {
                                "description": "Whether the item is visible in the menu.",
                                "optional": true,
                                "type": "boolean"
                            }
                        },
                        "support": {
                            "version_added": true
                        },
                        "type": "object"
                    },
                    {
                        "description": "Called when the context menu has been updated.",
                        "name": "callback",
                        "optional": true,
                        "parameters": [],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#remove-menuitemid",
                "async": "callback",
                "description": "Removes a context menu item.",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/remove",
                "name": "remove",
                "parameters": [
                    {
                        "choices": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "string"
                            }
                        ],
                        "description": "The ID of the context menu item to remove.",
                        "name": "menuItemId",
                        "support": {
                            "version_added": true
                        }
                    },
                    {
                        "description": "Called when the context menu has been removed.",
                        "name": "callback",
                        "optional": true,
                        "parameters": [],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#removeall",
                "async": "callback",
                "description": "Removes all context menu items added by this extension.",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/removeAll",
                "name": "removeAll",
                "parameters": [
                    {
                        "description": "Called when removal is complete.",
                        "name": "callback",
                        "optional": true,
                        "parameters": [],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#overridecontext-contextoptions",
                "description": "Show the matching menu items from this extension instead of the default menu. This should be called during a <a href='https://developer.mozilla.org/en-US/docs/Web/API/Element/contextmenu_event'>contextmenu</a> event handler, and only applies to the menu that opens after this event.",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/overrideContext",
                "name": "overrideContext",
                "parameters": [
                    {
                        "name": "contextOptions",
                        "properties": {
                            "context": {
                                "description": "ContextType to override, to allow menu items from other extensions in the menu. Currently only <var>tab</var> is supported. <var>contextOptions.showDefaults</var> cannot be used with this option.",
                                "enum": [
                                    "tab"
                                ],
                                "optional": true,
                                "type": "string"
                            },
                            "showDefaults": {
                                "default": false,
                                "description": "Whether to also include default menu items in the menu.",
                                "optional": true,
                                "type": "boolean"
                            },
                            "tabId": {
                                "description": "Required when context is <var>tab</var>. Requires the <permission>tabs</permission> permission.",
                                "minimum": 0,
                                "optional": true,
                                "type": "integer"
                            }
                        },
                        "support": {
                            "version_added": true
                        },
                        "type": "object"
                    }
                ],
                "permissions": [
                    "menus.overrideContext"
                ],
                "support": {
                    "version_added": "64"
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#refresh",
                "async": true,
                "description": "Updates the extension items in the shown menu, including changes that have been made since the menu was shown. Has no effect if the menu is hidden. Rebuilding a shown menu is an expensive operation, only invoke this method when necessary.",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/refresh",
                "name": "refresh",
                "parameters": [],
                "support": {
                    "version_added": true
                },
                "type": "function"
            }
        ],
        "namespace": "menus",
        "permissions": [
            "menus"
        ],
        "properties": {
            "ACTION_MENU_TOP_LEVEL_LIMIT": {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/beta-mv3/menus.html#action_menu_top_level_limit",
                "description": "The maximum number of top level extension items that can be added to an extension action context menu. Any items beyond this limit will be ignored.",
                "mdn_url": "https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/menus/ACTION_MENU_TOP_LEVEL_LIMIT",
                "support": {
                    "version_added": true
                },
                "value": 6
            }
        },
        "types": [
            {
                "description": "The different contexts a menu can appear in. Specifying <var>all</var> is equivalent to the combination of all other contexts excluding <var>tab</var> and <var>tools_menu</var>. More information about each context can be found in the <a href='https://developer.thunderbird.net/add-ons/mailextensions/supported-ui-elements#menu-items'>Supported UI Elements</a> article on developer.thunderbird.net.",
                "enum": [
                    "action",
                    "action_menu",
                    "all",
                    "all_message_attachments",
                    "audio",
                    "compose_action",
                    "compose_action_menu",
                    "compose_attachments",
                    "compose_body",
                    "editable",
                    "folder_pane",
                    "frame",
                    "image",
                    "link",
                    "message_attachments",
                    "message_display_action",
                    "message_display_action_menu",
                    "message_list",
                    "page",
                    "password",
                    "selection",
                    "tab",
                    "tools_menu",
                    "video"
                ],
                "id": "ContextType",
                "type": "string"
            },
            {
                "description": "The type of menu item.",
                "enum": [
                    "normal",
                    "checkbox",
                    "radio",
                    "separator"
                ],
                "id": "ItemType",
                "type": "string"
            },
            {
                "description": "Information sent when a context menu is being shown. Some properties are only included if the extension has host permission for the given context, for example <permission>activeTab</permission> for content tabs, <permission>compose</permission> for compose tabs and <permission>messagesRead</permission> for message display tabs.",
                "id": "OnShowData",
                "properties": {
                    "attachments": {
                        "description": "The selected attachments. The <permission>compose</permission> permission is required to return attachments of a message being composed. The <permission>messagesRead</permission> permission is required to return attachments of displayed messages.",
                        "items": {
                            "choices": [
                                {
                                    "$ref": "compose.ComposeAttachment"
                                },
                                {
                                    "$ref": "messages.MessageAttachment"
                                }
                            ]
                        },
                        "optional": true,
                        "type": "array"
                    },
                    "contexts": {
                        "description": "A list of all contexts that apply to the menu.",
                        "items": {
                            "$ref": "ContextType"
                        },
                        "type": "array"
                    },
                    "displayedFolder": {
                        "$ref": "folders.MailFolder",
                        "description": "The displayed folder. Only available for the <var>message_list</var> context. The <permission>accountsRead</permission> permission is required.",
                        "optional": true
                    },
                    "editable": {
                        "description": "A flag indicating whether the element is editable (text input, textarea, etc.).",
                        "type": "boolean"
                    },
                    "fieldId": {
                        "description": "An identifier of the clicked Thunderbird UI element, if any.",
                        "enum": [
                            "composeSubject",
                            "composeTo",
                            "composeCc",
                            "composeBcc",
                            "composeReplyTo",
                            "composeNewsgroupTo"
                        ],
                        "optional": true,
                        "type": "string"
                    },
                    "frameUrl": {
                        "description": "The URL of the frame of the element where the context menu was clicked, if it was in a frame. **Note:** Host permission is required.",
                        "optional": true,
                        "type": "string"
                    },
                    "linkText": {
                        "description": "If the element is a link, the text of that link. **Note:** Host permission is required.",
                        "optional": true,
                        "type": "string"
                    },
                    "linkUrl": {
                        "description": "If the element is a link, the URL it points to. **Note:** Host permission is required.",
                        "optional": true,
                        "type": "string"
                    },
                    "mediaType": {
                        "description": "One of <var>image</var>, <var>video</var>, or <var>audio</var> if the context menu was activated on one of these types of elements.",
                        "optional": true,
                        "type": "string"
                    },
                    "menuIds": {
                        "description": "A list of IDs of the menu items that were shown.",
                        "items": {
                            "choices": [
                                {
                                    "type": "integer"
                                },
                                {
                                    "type": "string"
                                }
                            ]
                        },
                        "type": "array"
                    },
                    "pageUrl": {
                        "description": "The URL of the page where the menu item was clicked. This property is not set if the click occurred in a context where there is no current page, such as in a launcher context menu. **Note:** Host permission is required.",
                        "optional": true,
                        "type": "string"
                    },
                    "selectedFolders": {
                        "description": "The selected folders in the folder pane. Only available for the <var>folder_pane</var> context. The <permission>accountsRead</permission> permission is required. The returned selection includes the folders which would be affected by a context action through Thunderbirds UI, which may not be the actuall selected folders. For example, if the user has multiple folders selected and opens the context menu for a folder outside that selection, only the folder for which the context menu was opened, is returned.",
                        "items": {
                            "$ref": "folders.MailFolder"
                        },
                        "optional": true,
                        "type": "array"
                    },
                    "selectedMessages": {
                        "$ref": "messages.MessageList",
                        "description": "The selected message(s) in the message list (a.k.a. the thread pane). Only available for the <var>message_list</var> context. The <permission>messagesRead</permission> permission is required. The returned selection includes the messages which would be affected by a context action through Thunderbirds UI, which may not be the actuall selected messages. For example, if the user has multiple messages selected and opens the context menu for a message outside that selection, only the message for which the context menu was opened, is returned.",
                        "optional": true
                    },
                    "selectionText": {
                        "description": "The text for the context selection, if any. **Note:** Host permission is required.",
                        "optional": true,
                        "type": "string"
                    },
                    "srcUrl": {
                        "description": "Will be present for elements with a <em>src</em> URL. **Note:** Host permission is required.",
                        "optional": true,
                        "type": "string"
                    },
                    "targetElementId": {
                        "description": "An identifier of the clicked content element, if any. Use $(ref:menus.getTargetElement) in the page to find the corresponding element.",
                        "optional": true,
                        "type": "integer"
                    },
                    "viewType": {
                        "$ref": "extension.ViewType",
                        "description": "The type of view where the menu is shown. May be unset if the menu is not associated with a view.",
                        "optional": true
                    }
                },
                "type": "object"
            },
            {
                "description": "Information sent when a context menu item is clicked.",
                "id": "OnClickData",
                "properties": {
                    "attachments": {
                        "description": "The selected attachments. The <permission>compose</permission> permission is required to return attachments of a message being composed. The <permission>messagesRead</permission> permission is required to return attachments of displayed messages.",
                        "items": {
                            "choices": [
                                {
                                    "$ref": "compose.ComposeAttachment"
                                },
                                {
                                    "$ref": "messages.MessageAttachment"
                                }
                            ]
                        },
                        "optional": true,
                        "type": "array"
                    },
                    "button": {
                        "description": "An integer value of button by which menu item was clicked.",
                        "optional": true,
                        "type": "integer"
                    },
                    "checked": {
                        "description": "A flag indicating the state of a checkbox or radio item after it is clicked.",
                        "optional": true,
                        "type": "boolean"
                    },
                    "displayedFolder": {
                        "$ref": "folders.MailFolder",
                        "description": "The displayed folder. Only available for the <var>message_list</var> context. The <permission>accountsRead</permission> permission is required.",
                        "optional": true
                    },
                    "editable": {
                        "description": "A flag indicating whether the element is editable (text input, textarea, etc.).",
                        "type": "boolean"
                    },
                    "fieldId": {
                        "description": "An identifier of the clicked Thunderbird UI element, if any.",
                        "enum": [
                            "composeSubject",
                            "composeTo",
                            "composeCc",
                            "composeBcc",
                            "composeReplyTo",
                            "composeNewsgroupTo"
                        ],
                        "optional": true,
                        "type": "string"
                    },
                    "frameId": {
                        "description": "The id of the frame of the element where the context menu was clicked.",
                        "minimum": 0,
                        "optional": true,
                        "type": "integer"
                    },
                    "frameUrl": {
                        "description": "The URL of the frame of the element where the context menu was clicked, if it was in a frame.",
                        "optional": true,
                        "type": "string"
                    },
                    "linkText": {
                        "description": "If the element is a link, the text of that link.",
                        "optional": true,
                        "type": "string"
                    },
                    "linkUrl": {
                        "description": "If the element is a link, the URL it points to.",
                        "optional": true,
                        "type": "string"
                    },
                    "mediaType": {
                        "description": "One of <var>image</var>, <var>video</var>, or <var>audio</var> if the context menu was activated on one of these types of elements.",
                        "optional": true,
                        "type": "string"
                    },
                    "menuItemId": {
                        "choices": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "string"
                            }
                        ],
                        "description": "The ID of the menu item that was clicked."
                    },
                    "modifiers": {
                        "description": "An array of keyboard modifiers that were held while the menu item was clicked.",
                        "items": {
                            "enum": [
                                "Shift",
                                "Alt",
                                "Command",
                                "Ctrl",
                                "MacCtrl"
                            ],
                            "type": "string"
                        },
                        "type": "array"
                    },
                    "pageUrl": {
                        "description": "The URL of the page where the menu item was clicked. This property is not set if the click occurred in a context where there is no current page, such as in a launcher context menu.",
                        "optional": true,
                        "type": "string"
                    },
                    "parentMenuItemId": {
                        "choices": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "string"
                            }
                        ],
                        "description": "The parent ID, if any, for the item clicked.",
                        "optional": true
                    },
                    "selectedFolders": {
                        "description": "The selected folders in the folder pane. Only available for the <var>folder_pane</var> context. The <permission>accountsRead</permission> permission is required. The returned selection includes the folders which would be affected by a context action through Thunderbirds UI, which may not be the actuall selected folders. For example, if the user has multiple folders selected and opens the context menu for a folder outside that selection, only the folder for which the context menu was opened, is returned.",
                        "items": {
                            "$ref": "folders.MailFolder"
                        },
                        "optional": true,
                        "type": "array"
                    },
                    "selectedMessages": {
                        "$ref": "messages.MessageList",
                        "description": "The selected message(s) in the message list (a.k.a. the thread pane). Only available for the <var>message_list</var> context. The <permission>messagesRead</permission> permission is required. The returned selection includes the messages which would be affected by a context action through Thunderbirds UI, which may not be the actuall selected messages. For example, if the user has multiple messages selected and opens the context menu for a message outside that selection, only the message for which the context menu was opened, is returned.",
                        "optional": true
                    },
                    "selectionText": {
                        "description": "The text for the context selection, if any.",
                        "optional": true,
                        "type": "string"
                    },
                    "srcUrl": {
                        "description": "Will be present for elements with a <em>src</em> URL.",
                        "optional": true,
                        "type": "string"
                    },
                    "targetElementId": {
                        "description": "An identifier of the clicked content element, if any. Use $(ref:menus.getTargetElement) in the page to find the corresponding element.",
                        "optional": true,
                        "type": "integer"
                    },
                    "viewType": {
                        "$ref": "extension.ViewType",
                        "description": "The type of view where the menu is clicked. May be unset if the menu is not associated with a view.",
                        "optional": true
                    },
                    "wasChecked": {
                        "description": "A flag indicating the state of a checkbox or radio item before it was clicked.",
                        "optional": true,
                        "type": "boolean"
                    }
                },
                "type": "object"
            },
            {
                "choices": [
                    {
                        "format": "imageDataOrStrictRelativeUrl",
                        "type": "string"
                    },
                    {
                        "pattern": "^(moz-extension|blob|http|https):.*$",
                        "type": "string"
                    }
                ],
                "description": "The path for a menu icon may be a relative path to an icon file, a <var>moz-extension:</var> URL, an image <var>data:</var> URL, a <var>blob:</var> URL, or a remote <var>http(s):</var> URL.",
                "id": "MenuIconPath"
            },
            {
                "description": "A <em>dictionary object</em> to specify paths for multiple icons in different sizes, so the best matching icon can be used, instead of scaling a standard icon to fit the pixel density of the user's display. Each entry is a <em>name-value</em> pair, with <em>name</em> being a size and <em>value</em> being a $(ref:menus.MenuIconPath). Example: <literalinclude>includes/IconPath.json<lang>JSON</lang></literalinclude>See the <a href='https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action#choosing_icon_sizes'>MDN documentation about choosing icon sizes</a> for more information on this. ",
                "id": "MenuIconDictionary",
                "patternProperties": {
                    "^[1-9]\\d*$": {
                        "$ref": "MenuIconPath"
                    }
                },
                "type": "object"
            },
            {
                "description": "A predefined command to open an action popup.",
                "enum": [
                    "_execute_action",
                    "_execute_compose_action",
                    "_execute_message_display_action"
                ],
                "id": "MenuActionCommand",
                "type": "string"
            }
        ]
    }
]