[
    {
        "namespace": "manifest",
        "types": [
            {
                "$extend": "OptionalPermission",
                "choices": [
                    {
                        "enum": [
                            "accountsRead"
                        ],
                        "type": "string"
                    }
                ]
            }
        ]
    },
    {
        "events": [
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest-mv3/accounts.html#oncreated-id-account",
                "description": "Fired when a new account has been created.",
                "name": "onCreated",
                "parameters": [
                    {
                        "name": "id",
                        "type": "string"
                    },
                    {
                        "$ref": "MailAccount",
                        "name": "account"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest-mv3/accounts.html#ondeleted-id",
                "description": "Fired when an account has been removed.",
                "name": "onDeleted",
                "parameters": [
                    {
                        "name": "id",
                        "type": "string"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest-mv3/accounts.html#onupdated-id-changedvalues",
                "description": "Fired when a property of an account has been modified. Folders and identities of accounts are not monitored by this event, use the dedicated folder and identity events instead. A changed <val>defaultIdentity</val> is reported only after a different identity has been assigned as default identity, but not after a property of the default identity has been changed.",
                "name": "onUpdated",
                "parameters": [
                    {
                        "name": "id",
                        "type": "string"
                    },
                    {
                        "name": "changedValues",
                        "properties": {
                            "defaultIdentity": {
                                "$ref": "identities.MailIdentity",
                                "description": "The default identity of this account."
                            },
                            "name": {
                                "description": "The human-friendly name of this account.",
                                "type": "string"
                            }
                        },
                        "type": "object"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            }
        ],
        "functions": [
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest-mv3/accounts.html#list-includefolders",
                "async": "callback",
                "description": "Returns all mail accounts. They will be returned in the same order as used in Thunderbird's folder pane.",
                "name": "list",
                "parameters": [
                    {
                        "default": true,
                        "description": "Specifies whether the returned $(ref:accounts.MailAccount) objects should included their account's folders. Defaults to <value>true</value>.",
                        "name": "includeFolders",
                        "optional": true,
                        "type": "boolean"
                    },
                    {
                        "name": "callback",
                        "optional": true,
                        "parameters": [
                            {
                                "items": {
                                    "$ref": "accounts.MailAccount"
                                },
                                "type": "array"
                            }
                        ],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest-mv3/accounts.html#get-accountid-includefolders",
                "async": "callback",
                "description": "Returns details of the requested account, or <value>null</value> if it doesn't exist.",
                "name": "get",
                "parameters": [
                    {
                        "name": "accountId",
                        "type": "string"
                    },
                    {
                        "default": true,
                        "description": "Specifies whether the returned $(ref:accounts.MailAccount) object should included the account's folders. Defaults to <value>true</value>.",
                        "name": "includeFolders",
                        "optional": true,
                        "type": "boolean"
                    },
                    {
                        "name": "callback",
                        "optional": true,
                        "parameters": [
                            {
                                "$ref": "accounts.MailAccount",
                                "optional": true
                            }
                        ],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest-mv3/accounts.html#getdefault-includefolders",
                "async": "callback",
                "description": "Returns the default account, or <value>null</value> if it is not defined.",
                "name": "getDefault",
                "parameters": [
                    {
                        "default": true,
                        "description": "Specifies whether the returned $(ref:accounts.MailAccount) object should included the account's folders. Defaults to <value>true</value>.",
                        "name": "includeFolders",
                        "optional": true,
                        "type": "boolean"
                    },
                    {
                        "name": "callback",
                        "optional": true,
                        "parameters": [
                            {
                                "$ref": "accounts.MailAccount",
                                "optional": true
                            }
                        ],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest-mv3/accounts.html#setdefaultidentity-accountid-identityid",
                "async": true,
                "deprecated": "This will be removed. Use $(ref:identities.setDefault) instead.",
                "description": "Sets the default identity for an account.",
                "name": "setDefaultIdentity",
                "parameters": [
                    {
                        "name": "accountId",
                        "type": "string"
                    },
                    {
                        "name": "identityId",
                        "type": "string"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            },
            {
                "api_documentation_url": "https://webextension-api.thunderbird.net/en/latest-mv3/accounts.html#getdefaultidentity-accountid",
                "async": "callback",
                "deprecated": "This will be removed. Use $(ref:identities.getDefault) instead.",
                "description": "Returns the default identity for an account, or <value>null</value> if it is not defined.",
                "name": "getDefaultIdentity",
                "parameters": [
                    {
                        "name": "accountId",
                        "type": "string"
                    },
                    {
                        "name": "callback",
                        "optional": true,
                        "parameters": [
                            {
                                "$ref": "identities.MailIdentity"
                            }
                        ],
                        "type": "function"
                    }
                ],
                "support": {
                    "version_added": true
                },
                "type": "function"
            }
        ],
        "namespace": "accounts",
        "permissions": [
            "accountsRead"
        ],
        "types": [
            {
                "description": "An object describing a mail account, as returned for example by the $(ref:accounts.list) and $(ref:accounts.get) methods. The <val>folders</val> property is only included if requested.",
                "id": "MailAccount",
                "properties": {
                    "folders": {
                        "description": "The folders for this account are only included if requested.",
                        "items": {
                            "$ref": "folders.MailFolder"
                        },
                        "optional": true,
                        "type": "array"
                    },
                    "id": {
                        "description": "A unique identifier for this account.",
                        "type": "string"
                    },
                    "identities": {
                        "description": "The identities associated with this account. The default identity is listed first, others in no particular order.",
                        "items": {
                            "$ref": "identities.MailIdentity"
                        },
                        "type": "array"
                    },
                    "name": {
                        "description": "The human-friendly name of this account.",
                        "type": "string"
                    },
                    "type": {
                        "description": "What sort of account this is, e.g. <value>imap</value>, <value>nntp</value>, or <value>pop3</value>.",
                        "type": "string"
                    }
                },
                "type": "object"
            }
        ]
    }
]